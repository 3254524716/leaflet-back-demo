<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.leaflet_back_demo.dao.FeatureDao">
    <!--  插入   -->
    <insert id="batchImportPayInfo" parameterType="java.util.List">
        insert into payrollaccount values
        <foreach item="item" collection="list" separator=",">
            (
            #{item.name},
            #{item.id},
            #{item.date},
            #{item.attendance},
            #{item.rest},
            #{item.overtime},
            #{item.leavetime}
            )
        </foreach>
    </insert>

    <!-- 映射  -->
    <resultMap id="BaseResultMap" type="com.example.leaflet_back_demo.entities.Feature">
        <id column="gid" property="gid" jdbcType="INTEGER"/>
        <id column="featureid" property="featureid" jdbcType="INTEGER"/>
        <id column="dkbh" property="dkbh" jdbcType="VARCHAR"/>
        <id column="ydmj" property="ydmj" jdbcType="FLOAT"/>
        <id column="ghyt" property="ghyt" jdbcType="VARCHAR"/>
        <id column="ytdm" property="ytdm" jdbcType="VARCHAR"/>
        <id column="hhbl" property="hhbl" jdbcType="VARCHAR"/>
        <id column="jfbh" property="jfbh" jdbcType="VARCHAR"/>
        <id column="ptss" property="ptss" jdbcType="VARCHAR"/>
        <id column="jzgd" property="jzgd" jdbcType="FLOAT"/>
        <id column="rjl" property="rjl" jdbcType="FLOAT"/>
        <id column="jzmj" property="jzmj" jdbcType="FLOAT"/>
        <id column="jzmd" property="jzmd" jdbcType="FLOAT"/>
        <id column="ldl" property="ldl" jdbcType="FLOAT"/>
        <id column="tcws" property="tcws" jdbcType="INTEGER"/>
        <id column="remark" property="remark" jdbcType="VARCHAR"/>
        <id column="ssgh" property="ssgh" jdbcType="INTEGER"/>
        <id column="dkmj" property="dkmj" jdbcType="FLOAT"/>
        <id column="jdccr" property="jdccr" jdbcType="VARCHAR"/>
        <id column="jsdt" property="jsdt" jdbcType="VARCHAR"/>
        <id column="geom_json" property="geom" jdbcType="VARCHAR"/>
    </resultMap>

    <!-- 查询所有   -->
    <select id="getFeaturesByField" resultMap="BaseResultMap">
        select * ,ST_AsGeoJSON(geom)::json AS geom_json from landuse where ${column} LIKE CONCAT('%', #{value}, '%')
    </select>
</mapper>